<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shqip365 - Ndeshjet e Sotme</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Shqip365</h1>
    <nav>
      <a href="#" class="active" onclick="loadMatches('LIVE')">Live</a>
      <a href="#" onclick="loadMatches('SCHEDULED')">Së Shpejti</a>
      <a href="#" onclick="loadMatches('FINISHED')">Përfunduar</a>
    </nav>
  </header>

  <main id="matches-container">
    <p>Duke u ngarkuar ndeshjet ⚽...</p>
  </main>

  <script>
    const API_KEY = "49e8b9175faa444ebe06923fc9b2a81b";
    const API_URL = "https://api.football-data.org/v4/matches";
    const container = document.getElementById("matches-container");

    async function loadMatches(status = "LIVE") {
      container.innerHTML = `<p>Duke u ngarkuar ndeshjet ⚽...</p>`;
      try {
        const res = await fetch(`${API_URL}?status=${status}`, {
          headers: { "X-Auth-Token": API_KEY }
        });
        const data = await res.json();

        if (!data.matches || data.matches.length === 0) {
          container.innerHTML = `<p>S’ka ndeshje aktualisht ⚽</p>`;
          return;
        }

        container.innerHTML = data.matches.map(match => {
          const home = match.homeTeam.name;
          const away = match.awayTeam.name;
          const score = match.score.fullTime.home !== null
            ? `${match.score.fullTime.home} - ${match.score.fullTime.away}`
            : "vs";
          const competition = match.competition.name;
          const time = new Date(match.utcDate).toLocaleTimeString("sq-AL", { hour: "2-digit", minute: "2-digit" });

          return `
            <div class="match">
              <h3>${home} <span class="score">${score}</span> ${away}</h3>
              <p>${competition} • ${time}</p>
            </div>
          `;
        }).join("");
      } catch (error) {
        container.innerHTML = `<p>Gabim gjatë marrjes së ndeshjeve ❌</p>`;
        console.error(error);
      }
    }

    loadMatches(); // ngarkon automatikisht ndeshjet live
  </script>
</body>
</html>
